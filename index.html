<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <base href="https://JTR2023.github.io/ct-pedestrian-demand/">
  <title>Connecticut Pedestrian DemandRank</title>
  <link rel="stylesheet" href="styles.css">
  
  <!-- Google Maps API -->
  <script defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDRG2xII3nH7HJkp08TKpssRgLkf0OjMBQ&callback=initMap"></script>
  
  <!-- deck.gl for large datasets -->
  <script src="https://unpkg.com/deck.gl@^8.9.0/dist.min.js"></script>
  
  <!-- Google Cloud Storage client library -->
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-storage.js"></script>
</head>
<body>
  <div class="container">
    <header>
      <h1>Connecticut Pedestrian DemandRank</h1>
    </header>
    
    <div class="main-content">
      <div class="sidebar">
        <div class="control-panel">
          <h2>Model Parameters</h2>
          <div class="weight-controls">
            <div class="weight-control">
              <label for="census-weight">Census Score (0-vehicle households)</label>
              <input type="range" id="census-weight" min="0" max="1" step="0.05" value="0.20">
              <span class="weight-value">20%</span>
            </div>
            <div class="weight-control">
              <label for="crash-weight">Crash Risk Score</label>
              <input type="range" id="crash-weight" min="0" max="1" step="0.05" value="0.20">
              <span class="weight-value">20%</span>
            </div>
            <div class="weight-control">
              <label for="func-class-weight">Functional Class Score</label>
              <input type="range" id="func-class-weight" min="0" max="1" step="0.05" value="0.20">
              <span class="weight-value">20%</span>
            </div>
            <div class="weight-control">
              <label for="school-weight">School Proximity</label>
              <input type="range" id="school-weight" min="0" max="1" step="0.05" value="0.10">
              <span class="weight-value">10%</span>
            </div>
            <div class="weight-control">
              <label for="trail-weight">Trail Proximity</label>
              <input type="range" id="trail-weight" min="0" max="1" step="0.05" value="0.10">
              <span class="weight-value">10%</span>
            </div>
            <div class="weight-control">
              <label for="rail-weight">Rail Stop Proximity</label>
              <input type="range" id="rail-weight" min="0" max="1" step="0.05" value="0.10">
              <span class="weight-value">10%</span>
            </div>
            <div class="weight-control">
              <label for="bus-weight">Bus Stop Proximity</label>
              <input type="range" id="bus-weight" min="0" max="1" step="0.05" value="0.10">
              <span class="weight-value">10%</span>
            </div>
            <div class="total-weight">Total: <span id="total-weight">100%</span></div>
            <button id="recalculate">Recalculate DemandRank</button>
          </div>
          
          <h2>Filters</h2>
          <div class="filters">
            <div class="filter">
              <input type="checkbox" id="pedestrian-feasible" checked>
              <label for="pedestrian-feasible">Pedestrian Feasible Only</label>
            </div>
            <div class="filter">
              <input type="checkbox" id="urban-context">
              <label for="urban-context">Urban Areas Only</label>
            </div>
            <div class="filter">
              <input type="checkbox" id="existing-sidewalks">
              <label for="existing-sidewalks">Show Existing Sidewalks</label>
            </div>
            <div class="filter">
              <input type="checkbox" id="show-street-view">
              <label for="show-street-view">Enable Street View</label>
            </div>
          </div>
          
          <h2>Score Range Filter</h2>
          <div class="score-filter">
            <div class="range-slider">
              <span>Minimum Score: <span id="min-score-value">10</span></span>
              <input type="range" id="min-score" min="10" max="76" step="1" value="10">
            </div>
            <div class="range-slider">
              <span>Maximum Score: <span id="max-score-value">76</span></span>
              <input type="range" id="max-score" min="10" max="76" step="1" value="76">
            </div>
          </div>
          
          <h2>Export</h2>
          <div class="export-controls">
            <button id="export-csv">Export CSV</button>
            <button id="export-geojson">Export GeoJSON</button>
          </div>
        </div>
      </div>
      
      <div class="map-container">
        <div id="map"></div>
        <div id="street-view" class="hidden"></div>
      </div>
    </div>
    
    <footer>
      <p>Based on Connecticut DOT Pedestrian DemandRank methodology</p>
    </footer>
  </div>

  <script src="config.js"></script>
  <script src="app.js"></script>
</body>
</html>